!function($){function init(plot){function findBottomSeries(s,allseries){var i;for(i=0;i<allseries.length;++i)if(allseries[i].id===s.fillBetween)return allseries[i];return"number"==typeof s.fillBetween?s.fillBetween<0||s.fillBetween>=allseries.length?null:allseries[s.fillBetween]:null}function computeFillBottoms(plot,s,datapoints){if(null!=s.fillBetween){var other=findBottomSeries(s,plot.getData());if(other){for(var px,py,intery,qx,qy,bottom,l,m,ps=datapoints.pointsize,points=datapoints.points,otherps=other.datapoints.pointsize,otherpoints=other.datapoints.points,newpoints=[],withlines=s.lines.show,withbottom=ps>2&&datapoints.format[2].y,withsteps=withlines&&s.lines.steps,fromgap=!0,i=0,j=0;;){if(i>=points.length)break;if(l=newpoints.length,null==points[i]){for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(j>=otherpoints.length){if(!withlines)for(m=0;m<ps;++m)newpoints.push(points[i+m]);i+=ps}else if(null==otherpoints[j]){for(m=0;m<ps;++m)newpoints.push(null);fromgap=!0,j+=otherps}else{if(px=points[i],py=points[i+1],qx=otherpoints[j],qy=otherpoints[j+1],bottom=0,px===qx){for(m=0;m<ps;++m)newpoints.push(points[i+m]);bottom=qy,i+=ps,j+=otherps}else if(px>qx){if(withlines&&i>0&&null!=points[i-ps]){for(intery=py+(points[i-ps+1]-py)*(qx-px)/(points[i-ps]-px),newpoints.push(qx),newpoints.push(intery),m=2;m<ps;++m)newpoints.push(points[i+m]);bottom=qy}j+=otherps}else{if(fromgap&&withlines){i+=ps;continue}for(m=0;m<ps;++m)newpoints.push(points[i+m]);withlines&&j>0&&null!=otherpoints[j-otherps]&&(bottom=qy+(otherpoints[j-otherps+1]-qy)*(px-qx)/(otherpoints[j-otherps]-qx)),i+=ps}fromgap=!1,l!==newpoints.length&&withbottom&&(newpoints[l+2]=bottom)}if(withsteps&&l!==newpoints.length&&l>0&&null!==newpoints[l]&&newpoints[l]!==newpoints[l-ps]&&newpoints[l+1]!==newpoints[l-ps+1]){for(m=0;m<ps;++m)newpoints[l+ps+m]=newpoints[l+m];newpoints[l+1]=newpoints[l-ps+1]}}datapoints.points=newpoints}}}plot.hooks.processDatapoints.push(computeFillBottoms)}var options={series:{fillBetween:null}};$.plot.plugins.push({init:init,options:options,name:"fillbetween",version:"1.0"})}(jQuery);